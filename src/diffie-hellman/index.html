<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Diffie-Hellman key exchange</title>
    <meta name="description" content="Diffie-Hellman key exchange">
    <meta name="author" content="Adrianus Kleemans">
</head>

<body>
<div ng-app="DiffieHellmanApp" ng-controller="DiffieHellmanCtrl as ctrl">
    <h2>Step 0: Who are you?</h2>

    <p>
        Who are you?
    </p>

    <label for="size">Choose a number size:</label>
    <select name="size" id="size" ng-model="numberSize">
        <option value="Small">small</option>
        <option value="Big">big</option>
    </select>

    <input type="radio" id="person-a" name="person" value="Alice" ng-model="me">
    <label for="person-a"> I am Alice</label>
    <input type="radio" id="person-b" name="person" value="Bob" ng-model="me">
    <label for="person-b"> I am Bob</label>
    <p>
        You are: {{me}}
    </p>

    <h2>Step 1: Alice generates p, g, b and calculates A</h2>

    <div ng-if="ctrl.me === 'Alice'">
        <button ng-click="prepareAlice()" type="button">Generate!</button>

        <ul>
            <li>p: {{ctrl._p}}</li>
            <li>g: {{ctrl._g}}</li>
            <li>A: {{ctrl.A}}</li>
            <li>Secret a: {{ctrl._a}} (do not share this!)</li>
        </ul>
    </div>
    <div ng-if="ctrl.me === 'Bob'">
        <p>Alice is generating primes and her secret number. Nothing to do for Bob here, please continue to next
            step.</p>
    </div>

    <h2>Step 2: First exchange</h2>

    <div ng-if="ctrl.me === 'Alice'">
        <p>Please share p, g and A with your friend Bob and wait for his response.</p>
    </div>
    <div ng-if="ctrl.me === 'Bob'">
        <p>Wait for Alice to send you p, g and A and enter them here:</p>
        <label for="bob-p">Enter p: </label><input type="number" id="bob-p" value="small" ng-model="ctrl._p"><br>
        <label for="bob-g">Enter g: </label><input type="number" id="bob-g" value="small" ng-model="ctrl._g"><br>
        <label for="bob-A">Enter A: </label><input type="number" id="bob-A" value="small" ng-model="ctrl._A"><br>
    </div>

    <h2>Step 3: Bob generates b & calculates B</h2>

    <div ng-if="ctrl.me === 'Alice'">
        <p>Bob is generating his secret number. Nothing to do for Alice here, please continue to next step.</p>
    </div>
    <div ng-if="ctrl.me === 'Bob'">
        <button ng-click="ctrl.prepareBob()" type="button">Generate Bob's secret b!</button>

        <ul>
            <li>B: {{ctrl.B}}</li>
            <li>Secret b: {{ctrl._b}} (do not share this!)</li>
        </ul>
    </div>

    <h2>Step 4: Second exchange</h2>

    <div ng-if="ctrl.me === 'Alice'">
        <p>Please enter <b>B</b> you get from Bob:</p>
        TODO input
    </div>
    <div ng-if="ctrl.me === 'Bob'">
        <p>Please share your number B with Alice: {{ctrl.B}}</p>
    </div>

    <h2>Final step 5: Calculation of the key</h2>

    <div ng-if="ctrl.me === 'Alice'">
        <p>As Alice, we can now compute the key as follows:</p>
        TODO
    </div>
    <div ng-if="ctrl.me === 'Bob'">
        <p>As Bob, we can now compute the key as follows:</p>
        TODO
    </div>

    <h2>Exchange "secured" messages</h2>

    You can now exchange messages with your new key K!

    Try for example AES (?), enter a message, transmit it and decrypt it:

    TODO inputs

</div>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
      integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
<script src="../../lib/angular.js"></script>
<script src="diffie-hellman.js"></script>
</body>
</html>
